
[TestSelector/ignores_alerting_rules_with_syntax_errors - 1]
[]

---

[TestSelector/ignores_recording_rules_with_syntax_errors - 1]
[]

---

[TestSelector/label_missing - 1]
- description: label missing
  content: |4

    - alert: foo
      expr: errors > 0
  output: |
    3 |   expr: errors > 0
                ^^^^^^ This vector selector must specify `job` label. Please add a `{job="..."} matcher.
  problem:
    reporter: promql/selector
    summary: required matcher missing
    details: 'Rule comment: comment'
    diagnostics:
        - message: This vector selector must specify `job` label. Please add a `{job="..."} matcher.
          firstcolumn: 1
          lastcolumn: 6
          kind: 0
    lines:
        first: 3
        last: 3
    severity: 1
    anchor: 0

---

[TestSelector/label_missing_/___name__ - 1]
- description: label missing / __name__
  content: |4

    - alert: foo
      expr: |
        {__name__="errors"} > 0
  output: |
    4 |     {__name__="errors"} > 0
            ^^^^^^^^^^^^^^^^^^^ This vector selector must specify `job` label. Please add a `{job="..."} matcher.
  problem:
    reporter: promql/selector
    summary: required matcher missing
    details: 'Rule comment: comment'
    diagnostics:
        - message: This vector selector must specify `job` label. Please add a `{job="..."} matcher.
          firstcolumn: 1
          lastcolumn: 19
          kind: 0
    lines:
        first: 4
        last: 4
    severity: 1
    anchor: 0

---

[TestSelector/label_missing_/___name___regexp - 1]
- description: label missing / __name__ regexp
  content: |4

    - alert: foo
      expr: |
        {__name__=~"errors"} > 0
  output: |
    4 |     {__name__=~"errors"} > 0
            ^^^^^^^^^^^^^^^^^^^^ This vector selector must specify `job` label. Please add a `{job="..."} matcher.
  problem:
    reporter: promql/selector
    summary: required matcher missing
    details: 'Rule comment: comment'
    diagnostics:
        - message: This vector selector must specify `job` label. Please add a `{job="..."} matcher.
          firstcolumn: 1
          lastcolumn: 20
          kind: 0
    lines:
        first: 4
        last: 4
    severity: 1
    anchor: 0

---

[TestSelector/label_missing_/_matchers - 1]
- description: label missing / matchers
  content: |4

    - alert: foo
      expr: errors{cluster="dev", instance="foo"} > 0
  output: |
    3 |   expr: errors{cluster="dev", instance="foo"} > 0
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^ This vector selector must specify `job` label. Please add a `{job="..."} matcher.
  problem:
    reporter: promql/selector
    summary: required matcher missing
    details: 'Rule comment: comment'
    diagnostics:
        - message: This vector selector must specify `job` label. Please add a `{job="..."} matcher.
          firstcolumn: 1
          lastcolumn: 37
          kind: 0
    lines:
        first: 3
        last: 3
    severity: 1
    anchor: 0

---

[TestSelector/label_missing_/_name_mismatch - 1]
[]

---

[TestSelector/label_missing_/_regexp_name_mismatch - 1]
[]

---

[TestSelector/label_missing_inside_call - 1]
- description: label missing inside call
  content: |4

    - alert: foo
      expr: absent(errors{xjob="foo"})
  output: |
    3 |   expr: absent(errors{xjob="foo"})
                       ^^^^^^^^^^^^^^^^^^ Vector selectors inside the `absent()` function must specify `job` label. Please add a `{job="..."} matcher.
  problem:
    reporter: promql/selector
    summary: required matcher missing
    details: 'Rule comment: comment'
    diagnostics:
        - message: Vector selectors inside the `absent()` function must specify `job` label. Please add a `{job="..."} matcher.
          firstcolumn: 8
          lastcolumn: 25
          kind: 0
    lines:
        first: 3
        last: 3
    severity: 1
    anchor: 0

---

[TestSelector/label_present - 1]
[]

---

[TestSelector/label_present_inside_call - 1]
[]

---
